<?xml version="1.0" encoding="UTF-8"?>
<article><question>Upload Files</question><answer>Step 1: Create an Upload Form&#13;
Create a Node.js file that writes an HTML form, with an upload field:&#13;
&#13;
Example&#13;
This code will produce an HTML form:&#13;
&#13;
var http = require('http');&#13;
&#13;
http.createServer(function (req, res) {&#13;
  res.writeHead(200, {'Content-Type': 'text/html'});&#13;
  res.write('&lt;form action="fileupload" method="post" enctype="multipart/form-data"&gt;');&#13;
  res.write('&lt;input type="file" name="filetoupload"&gt;&lt;br&gt;');&#13;
  res.write('&lt;input type="submit"&gt;');&#13;
  res.write('&lt;/form&gt;');&#13;
  return res.end();&#13;
}).listen(8080);&#13;
Step 2: Parse the Uploaded File&#13;
Include the Formidable module to be able to parse the uploaded file once it reaches the server.&#13;
&#13;
When the file is uploaded and parsed, it gets placed on a temporary folder on your computer.&#13;
&#13;
Example&#13;
The file will be uploaded, and placed on a temporary folder:&#13;
&#13;
var http = require('http');&#13;
var formidable = require('formidable');&#13;
&#13;
http.createServer(function (req, res) {&#13;
  if (req.url == '/fileupload') {&#13;
    var form = new formidable.IncomingForm();&#13;
    form.parse(req, function (err, fields, files) {&#13;
      res.write('File uploaded');&#13;
      res.end();&#13;
    });&#13;
  } else {&#13;
    res.writeHead(200, {'Content-Type': 'text/html'});&#13;
    res.write('&lt;form action="fileupload" method="post" enctype="multipart/form-data"&gt;');&#13;
    res.write('&lt;input type="file" name="filetoupload"&gt;&lt;br&gt;');&#13;
    res.write('&lt;input type="submit"&gt;');&#13;
    res.write('&lt;/form&gt;');&#13;
    return res.end();&#13;
  }&#13;
}).listen(8080);&#13;
Step 3: Save the File&#13;
When a file is successfully uploaded to the server, it is placed on a temporary folder.&#13;
&#13;
The path to this directory can be found in the "files" object, passed as the third argument in the parse() method's callback function.&#13;
&#13;
To move the file to the folder of your choice, use the File System module, and rename the file:&#13;
&#13;
Example&#13;
Include the fs module, and move the file to the current folder:&#13;
&#13;
var http = require('http');&#13;
var formidable = require('formidable');&#13;
var fs = require('fs');&#13;
&#13;
http.createServer(function (req, res) {&#13;
  if (req.url == '/fileupload') {&#13;
    var form = new formidable.IncomingForm();&#13;
    form.parse(req, function (err, fields, files) {&#13;
      var oldpath = files.filetoupload.path;&#13;
      var newpath = 'C:/Users/Your Name/' + files.filetoupload.name;&#13;
      fs.rename(oldpath, newpath, function (err) {&#13;
        if (err) throw err;&#13;
        res.write('File uploaded and moved!');&#13;
        res.end();&#13;
      });&#13;
 });&#13;
  } else {&#13;
    res.writeHead(200, {'Content-Type': 'text/html'});&#13;
    res.write('&lt;form action="fileupload" method="post" enctype="multipart/form-data"&gt;');&#13;
    res.write('&lt;input type="file" name="filetoupload"&gt;&lt;br&gt;');&#13;
    res.write('&lt;input type="submit"&gt;');&#13;
    res.write('&lt;/form&gt;');&#13;
    return res.end();&#13;
  }&#13;
}).listen(8080);</answer><location></location><tags></tags><user>rain_deer</user><context></context><unixTime>1614278524</unixTime><date>25-02-2021</date></article>
